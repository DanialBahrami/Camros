{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "Bondura-SAP"
		},
		"AzureBlobStorage_json_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureBlobStorage_json'"
		},
		"AzureSqlDatabase_Bondura_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureSqlDatabase_Bondura'"
		},
		"BonduraServiceLayer_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'BonduraServiceLayer'"
		},
		"BonduraServiceLayerV1_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'BonduraServiceLayerV1'"
		},
		"OData_Semantic_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'OData_Semantic'"
		},
		"RestService_Bondura_Invoices_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'RestService_Bondura_Invoices'"
		},
		"RestService_Bondura_SE_invoives_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'RestService_Bondura_SE_invoives'"
		},
		"RestService_Semantic_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'RestService_Semantic'"
		},
		"RestService_bo_invoices_incparam_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'RestService_bo_invoices_incparam'"
		},
		"RestService_bondura_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'RestService_bondura'"
		},
		"RestService_orders_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'RestService_orders'"
		},
		"SapEcc_Bondura_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'SapEcc_Bondura'"
		},
		"linkedService_bo_budgets_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'linkedService_bo_budgets'"
		},
		"linkedService_bo_inc_log_blob_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'linkedService_bo_inc_log_blob'"
		},
		"linkedService_bo_log_budgets_lines_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'linkedService_bo_log_budgets_lines'"
		},
		"BonduraServiceLayer_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/"
		},
		"BonduraServiceLayer_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"BonduraServiceLayerV1_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/"
		},
		"BonduraServiceLayerV1_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"OData_Semantic_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/sml.svc/SalesAnalysisQuery"
		},
		"OData_Semantic_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"RestService_Bondura_Invoices_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/Invoices?$count=true&$top=1&$skip={skip}"
		},
		"RestService_Bondura_Invoices_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"RestService_Bondura_SE_invoives_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/Invoices?$count=true&$skip={skip}"
		},
		"RestService_Bondura_SE_invoives_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA_SE\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"RestService_Semantic_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/sml.svc/SalesAnalysisQuery"
		},
		"RestService_Semantic_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"RestService_bo_invoices_incparam_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/Invoices"
		},
		"RestService_bo_invoices_incparam_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"RestService_bondura_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/"
		},
		"RestService_bondura_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"RestService_orders_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/Orders?$count=true&$top=1&$skip={skip}"
		},
		"RestService_orders_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		},
		"SapEcc_Bondura_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://SU-2111-139.emea.businessone.cloud.sap/b1s/v2/"
		},
		"SapEcc_Bondura_properties_typeProperties_username": {
			"type": "string",
			"defaultValue": "{\"CompanyDB\":\"BONDURA\",\"UserName\":\"CLOUD\\\\ui.report\"}"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/AzureBlobStorage_json')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('AzureBlobStorage_json_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlDatabase_Bondura')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('AzureSqlDatabase_Bondura_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/BonduraServiceLayer')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Conncection to Bondura OData REST APIs",
				"annotations": [],
				"type": "OData",
				"typeProperties": {
					"url": "[parameters('BonduraServiceLayer_properties_typeProperties_url')]",
					"authenticationType": "Basic",
					"userName": "[parameters('BonduraServiceLayer_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('BonduraServiceLayer_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/BonduraServiceLayerV1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "OData",
				"typeProperties": {
					"url": "[parameters('BonduraServiceLayerV1_properties_typeProperties_url')]",
					"authenticationType": "Basic",
					"userName": "[parameters('BonduraServiceLayerV1_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('BonduraServiceLayerV1_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/OData_Semantic')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "OData",
				"typeProperties": {
					"url": "[parameters('OData_Semantic_properties_typeProperties_url')]",
					"authenticationType": "Basic",
					"userName": "[parameters('OData_Semantic_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('OData_Semantic_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/RestService_Bondura_Invoices')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('RestService_Bondura_Invoices_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Basic",
					"userName": "[parameters('RestService_Bondura_Invoices_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('RestService_Bondura_Invoices_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/RestService_Bondura_SE_invoives')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('RestService_Bondura_SE_invoives_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Basic",
					"userName": "[parameters('RestService_Bondura_SE_invoives_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('RestService_Bondura_SE_invoives_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/RestService_Semantic')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('RestService_Semantic_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Basic",
					"userName": "[parameters('RestService_Semantic_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('RestService_Semantic_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/RestService_bo_invoices_incparam')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('RestService_bo_invoices_incparam_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Basic",
					"userName": "[parameters('RestService_bo_invoices_incparam_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('RestService_bo_invoices_incparam_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/RestService_bondura')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('RestService_bondura_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Basic",
					"userName": "[parameters('RestService_bondura_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('RestService_bondura_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/RestService_orders')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('RestService_orders_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Basic",
					"userName": "[parameters('RestService_orders_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('RestService_orders_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SapEcc_Bondura')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SapEcc",
				"typeProperties": {
					"url": "[parameters('SapEcc_Bondura_properties_typeProperties_url')]",
					"username": "[parameters('SapEcc_Bondura_properties_typeProperties_username')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('SapEcc_Bondura_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/linkedService_bo_budgets')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('linkedService_bo_budgets_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/linkedService_bo_inc_log_blob')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('linkedService_bo_inc_log_blob_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/linkedService_bo_log_budgets_lines')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('linkedService_bo_log_budgets_lines_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlTable_bo_budgets')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase_Bondura",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "FutureAnnualExpensesCreditSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureAnnualExpensesCreditLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureAnnualExpensesDebitSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureAnnualExpensesDebitLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureAnnualRevenuesCredit",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureAnnualRevenuesDebit",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureRevenuesDebitSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "FutureRevenuesDebitLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "ParentAccPercent",
						"type": "float",
						"precision": 15
					},
					{
						"name": "StartofFiscalYear",
						"type": "datetimeoffset",
						"scale": 7
					},
					{
						"name": "ParentAccountKey",
						"type": "nvarchar"
					},
					{
						"name": "TotalAnnualBudgetDebitSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "BudgetBalanceDebitSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "BudgetBalanceDebitLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "TotalAnnualBudgetDebitLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "TotalAnnualBudgetCreditSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "TotalAnnualBudgetCreditLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "BudgetBalanceCreditSys",
						"type": "float",
						"precision": 15
					},
					{
						"name": "BudgetBalanceCreditLoc",
						"type": "float",
						"precision": 15
					},
					{
						"name": "DivisionCode",
						"type": "int",
						"precision": 10
					},
					{
						"name": "AccountCode",
						"type": "nvarchar"
					},
					{
						"name": "Numerator",
						"type": "int",
						"precision": 10
					},
					{
						"name": "BudgetScenario",
						"type": "int",
						"precision": 10
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Budgets_Dump"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureSqlDatabase_Bondura')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlTable_bo_budgets_lines')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase_Bondura",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "BudgetScenario",
						"type": "smallint",
						"precision": 5
					},
					{
						"name": "PrecentOfAnnualBudgetAmount",
						"type": "float",
						"precision": 15
					},
					{
						"name": "RowNumber",
						"type": "smallint",
						"precision": 5
					},
					{
						"name": "BudgetTotCredit",
						"type": "float",
						"precision": 15
					},
					{
						"name": "BudgetSysTotCredit",
						"type": "float",
						"precision": 15
					},
					{
						"name": "m_ds",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Budgets_Lines"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureSqlDatabase_Bondura')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlTable_invoives_all_src')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase_Bondura",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": "dbo",
					"table": "Invoices_Dump"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureSqlDatabase_Bondura')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlTable_orders_all_src')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase_Bondura",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": "dbo",
					"table": "orders_all_src"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureSqlDatabase_Bondura')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSql_invoices_update')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDatabase_Bondura",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [
					{
						"name": "DocEntry",
						"type": "nvarchar"
					},
					{
						"name": "DocNum",
						"type": "int",
						"precision": 10
					},
					{
						"name": "DocDate",
						"type": "datetime2",
						"scale": 7
					},
					{
						"name": "DocDueDate",
						"type": "datetime2",
						"scale": 7
					},
					{
						"name": "CardCode",
						"type": "int",
						"precision": 10
					},
					{
						"name": "CardName",
						"type": "nvarchar"
					},
					{
						"name": "NumAtCard",
						"type": "nvarchar"
					},
					{
						"name": "DocTotal",
						"type": "float",
						"precision": 15
					},
					{
						"name": "DocCurrency",
						"type": "nvarchar"
					},
					{
						"name": "SalesPersonCode",
						"type": "smallint",
						"precision": 5
					},
					{
						"name": "FederalTaxID",
						"type": "nvarchar"
					},
					{
						"name": "VatSum",
						"type": "float",
						"precision": 15
					},
					{
						"name": "Address2",
						"type": "nvarchar"
					},
					{
						"name": "LineTotal",
						"type": "float",
						"precision": 15
					},
					{
						"name": "m_ds",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "Invoices_Dump"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/AzureSqlDatabase_Bondura')]"
			]
		}
	]
}